var siq_log=function(b){if(location.href.indexOf("siqdebug=1")>-1&&typeof console!="undefined"&&console.log){console.log("siq_container_pub: "+b)}};function siq_contentLoaded(d,j){var c=false,h=true,l=d.document,k=l.documentElement,a=l.addEventListener,o=a?"addEventListener":"attachEvent",m=a?"removeEventListener":"detachEvent",b=a?"":"on",n=function(p){if(p.type=="readystatechange"&&l.readyState!="complete"){return}(p.type=="load"?d:l)[m](b+p.type,n,false);if(!c&&(c=true)){j.call(d,p.type||p)}},g=function(){try{k.doScroll("left")}catch(p){setTimeout(g,50);return}n("poll")};if(l.readyState=="complete"){j.call(d,"lazy")}else{if(!a&&k.doScroll){try{h=!d.frameElement}catch(f){}if(h){g()}}l[o](b+"DOMContentLoaded",n,false);l[o](b+"readystatechange",n,false);d[o](b+"load",n,false)}}SiqContainer=function(a){if(!window.siqConfig||!window.siqConfig.engineKey){return}if(!window.siqConfig.forceLoadSettings&&!SiqContainer.pageHasSearchBox()&&!SiqContainer.hasResultPageWrapper()){return}siq_log("SiqContainer.constructor():"+a);window.siqConfig.version=window.siqConfig.version||"2.2.38";window.siq_version=window.siqConfig.version;window.siq_engine_key=window.siqConfig.engineKey;window.siqConfig.baseUrl=window.siqConfig.baseUrl.replace(/^(https?:)?\/\/(pub|static)\.searchiq\.(xyz|co)/,"//static.searchiq.co");window.siq_baseUrl=window.siqConfig.baseUrl;window.siq_api_endpoint=window.siq_baseUrl.replace(/^(https?:)?\/\/(pub|static)\.searchiq\.(xyz|co)/,"//api.searchiq.co")+"api/";SiqContainer.start()};SiqContainer.start=function(){siq_log("SiqContainer.start()");SiqContainer.loadJQuery(function(){siq_log("jquery loaded.");SiqContainer.loadSettings(function(){siq_log("Setting loaded.");var a="#siq_search_results";if(SiqConfig.queryParameter){a+=",input[name='"+SiqConfig.queryParameter+"']"}if(SiqConfig.searchBoxName){a+=",input[name='"+SiqConfig.searchBoxName+"']"}if(window.siqConfig.forceLoadSettings||siq_S(a).length){SiqContainer.loadTargetJs()}else{siq_log("Skipping loading scripts, no search box found.")}})})};SiqContainer.pageHasSearchBox=function(){var b=false;var a=document.getElementsByTagName("input");if(typeof a!="undefined"&&a!=null&&a.length>0){siq_log("Number of input elements on page:"+a.length);for(i=0;i<a.length;i++){if((a[i].type==="text"||a[i].type==="search")&&(!a[i].id||a[i].id!="adminbar-search")){b=true;break}}}if(b){siq_log("Atleast one input[type='text'] found")}else{siq_log("No input[type='text'] found")}return b};SiqContainer.hasResultPageWrapper=function(){var b=false;var a=document.getElementById("siq_search_results");if(typeof a!="undefined"&&a!=null){b=true;siq_log("Search result wrapper found on page")}if(!b){siq_log("Search result wrapper not found on page")}return b};SiqContainer.loadSettings=function(callback){var handler=function(data){var res=eval(data);window.SiqConfig=res;SiqConfig.jsVersion=siqConfig.version=SiqConfig.jsVersion||siqConfig.version;callback()};siq_log("loadSettings():start.");var url=siq_api_endpoint+"searchEngines/"+siq_engine_key+"/settings?cb="+Math.ceil(Math.random()*9999999)+"&r="+encodeURIComponent(location.href);if(siqConfig.preview){url+="&preview=true"}if(typeof window.siq_S==="undefined"){return}if(SiqContainer.ismsie()&&parseInt(SiqContainer.msieversion(),10)>=8&&window.XDomainRequest){siq_S.ajax({dataType:"jsonp",url:url,data:"",success:handler})}else{siq_S.getJSON(url,handler)}};SiqContainer.loadTargetJs=function(){siq_log("SiqContainer.loadTargetJs(): start loading target scripts");if(SiqConfig.scripts instanceof Array&&SiqConfig.scripts.length>0){for(var d=0;d<SiqConfig.scripts.length;d++){var a=SiqConfig.scripts[d];if(/^(##BASEURL##|(https?:)?\/\/)[^\n]+$/.test(a)){var g=a.replace("##BASEURL##",siq_baseUrl).replace("##VERSION##",SiqConfig.jsVersion);siq_log("SiqContainer.loadTargetJs(): load "+g);SiqContainer.MYLAB.script(g)}else{var b=document.createElement("SCRIPT");b.type="text/javascript";b.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(b)}}}if(SiqConfig.rawScripts&&SiqConfig.rawScripts.length>0){for(var d=0;d<SiqConfig.rawScripts.length;d++){try{var c=SiqConfig.rawScripts[d];var b=document.createElement("SCRIPT");b.type="text/javascript";b.appendChild(document.createTextNode(c));document.getElementsByTagName("head")[0].appendChild(b)}catch(f){siq_log("Cannot run rawScript. Error: "+f.toString())}}}};(function(W){var f=W.$LAB,j="UseLocalXHR",g="AlwaysPreserveOrder",p="AllowDuplicates",V="CacheBust",T="BasePath",R=/^[^?#]*\//.exec(location.href)[0],Q=/^\w+\:\/\/\/?[^\/]+/.exec(R)[0],X=document.head||document.getElementsByTagName("head"),e=(W.opera&&Object.prototype.toString.call(W.opera)=="[object Opera]")||("MozAppearance" in document.documentElement.style),U=document.createElement("script"),w=typeof U.preload=="boolean",S=w||(U.readyState&&U.readyState=="uninitialized"),n=!S&&U.async===true,d=!S&&!n&&!e;function m(o){return Object.prototype.toString.call(o)=="[object Function]"}function l(o){return Object.prototype.toString.call(o)=="[object Array]"}function c(q,r){var o=/^\w+\:\/\//;if(/^\/\/\/?/.test(q)){q=location.protocol+q}else{if(!o.test(q)&&q.charAt(0)!="/"){q=(r||"")+q}}return o.test(q)?q:((q.charAt(0)=="/"?Q:R)+q)}function x(q,r){for(var o in q){if(q.hasOwnProperty(o)){r[o]=q[o]}}return r}function b(q){var r=false;for(var o=0;o<q.scripts.length;o++){if(q.scripts[o].ready&&q.scripts[o].exec_trigger){r=true;q.scripts[o].exec_trigger();q.scripts[o].exec_trigger=null}}return r}function v(q,s,o,r){q.onload=q.onreadystatechange=function(){if((q.readyState&&q.readyState!="complete"&&q.readyState!="loaded")||s[o]){return}q.onload=q.onreadystatechange=null;r()}}function k(o){o.ready=o.finished=true;for(var q=0;q<o.finished_listeners.length;q++){o.finished_listeners[q]()}o.ready_listeners=[];o.finished_listeners=[]}function a(t,r,s,q,o){setTimeout(function(){var y,z=r.real_src,u;if("item" in X){if(!X[0]){setTimeout(arguments.callee,25);return}X=X[0]}y=document.createElement("script");if(r.type){y.type=r.type}if(r.charset){y.charset=r.charset}if(o){if(S){s.elem=y;if(w){y.preload=true;y.onpreload=q}else{y.onreadystatechange=function(){if(y.readyState=="loaded"){q()}}}y.src=z}else{if(o&&z.indexOf(Q)==0&&t[j]){u=new XMLHttpRequest();u.onreadystatechange=function(){if(u.readyState==4){u.onreadystatechange=function(){};s.text=u.responseText+"\n//@ sourceURL="+z;q()}};u.open("GET",z);u.send()}else{y.type="text/cache-script";v(y,s,"ready",function(){X.removeChild(y);q()});y.src=z;X.insertBefore(y,X.firstChild)}}}else{if(n){y.async=false;v(y,s,"finished",q);y.src=z;X.insertBefore(y,X.firstChild)}else{v(y,s,"finished",q);y.src=z;X.insertBefore(y,X.firstChild)}}},0)}function h(){var q={},u=S||d,z=[],y={},o;q[j]=true;q[g]=false;q[p]=false;q[V]=false;q[T]="";function t(B,E,A){var D;function C(){if(D!=null){D=null;k(A)}}if(y[E.src].finished){return}if(!B[p]){y[E.src].finished=true}D=A.elem||document.createElement("script");if(E.type){D.type=E.type}if(E.charset){D.charset=E.charset}v(D,A,"finished",C);if(A.elem){A.elem=null}else{if(A.text){D.onload=D.onreadystatechange=null;D.text=A.text}else{D.src=E.real_src}}X.insertBefore(D,X.firstChild);if(A.text){C()}}function s(H,A,G,E){var F,D,C=function(){A.ready_cb(A,function(){t(H,A,F)})},B=function(){A.finished_cb(A,G)};A.src=c(A.src,H[T]);A.real_src=A.src+(H[V]?((/\?.*$/.test(A.src)?"&_":"?_")+~~(Math.random()*1000000000)+"="):"");if(!y[A.src]){y[A.src]={items:[],finished:false}}D=y[A.src].items;if(H[p]||D.length==0){F=D[D.length]={ready:false,finished:false,ready_listeners:[C],finished_listeners:[B]};a(H,A,F,((E)?function(){F.ready=true;for(var I=0;I<F.ready_listeners.length;I++){F.ready_listeners[I]()}F.ready_listeners=[]}:function(){k(F)}),E)}else{F=D[0];if(F.finished){B()}else{F.finished_listeners.push(B)}}}function r(){var H,G=x(q,{}),F=[],E=0,J=false,D;function C(K,L){K.ready=true;K.exec_trigger=L;I()}function B(L,M){L.ready=L.finished=true;L.exec_trigger=null;for(var K=0;K<M.scripts.length;K++){if(!M.scripts[K].finished){return}}M.finished=true;I()}function I(){while(E<F.length){if(m(F[E])){try{F[E++]()}catch(K){siq_log(K)}continue}else{if(!F[E].finished){if(b(F[E])){continue}break}}E++}if(E==F.length){J=false;D=false}}function A(){if(!D||!D.scripts){F.push(D={scripts:[],finished:true})}}H={script:function(){for(var K=0;K<arguments.length;K++){(function(M,O){var L;if(!l(M)){O=[M]}for(var N=0;N<O.length;N++){A();M=O[N];if(m(M)){M=M()}if(!M){continue}if(l(M)){L=[].slice.call(M);L.unshift(N,1);[].splice.apply(O,L);N--;continue}if(typeof M=="string"){M={src:M}}M=x(M,{ready:false,ready_cb:C,finished:false,finished_cb:B});D.finished=false;D.scripts.push(M);s(G,M,D,(u&&J));J=true;if(G[g]){H.wait()}}})(arguments[K],arguments[K])}return H},wait:function(){if(arguments.length>0){for(var K=0;K<arguments.length;K++){F.push(arguments[K])}D=F[F.length-1]}else{D=false}I();return H}};return{script:H.script,wait:H.wait,setOptions:function(K){x(K,G);return H}}}o={setGlobalDefaults:function(A){x(A,q);return o},setOptions:function(){return r().setOptions.apply(null,arguments)},script:function(){return r().script.apply(null,arguments)},wait:function(){return r().wait.apply(null,arguments)},queueScript:function(){z[z.length]={type:"script",args:[].slice.call(arguments)};return o},queueWait:function(){z[z.length]={type:"wait",args:[].slice.call(arguments)};return o},runQueue:function(){var B=o,D=z.length,A=D,C;for(;--A>=0;){C=z.shift();B=B[C.type].apply(null,C.args)}return B},noConflict:function(){W.$LAB=f;return o},sandbox:function(){return h()}};return o}W.$LAB=h();(function(q,r,o){if(document.readyState==null&&document[q]){document.readyState="loading";document[q](r,o=function(){document.removeEventListener(r,o,false);document.readyState="complete"},false)}})("addEventListener","DOMContentLoaded")})(this);SiqContainer.MYLAB=$LAB.noConflict();SiqContainer.isJQueryValid=function(b){var a=b&&b.fn&&b.fn.jquery&&SiqContainer.versionCompare(b.fn.jquery,">=","1.9.1")&&typeof b.ajax!=="undefined"&&typeof b.getJSON!=="undefined";return a};SiqContainer.versionCompare=function(v1,comparator,v2){comparator=comparator=="="?"==":comparator;var v1parts=v1.split("."),v2parts=v2.split(".");var maxLen=Math.max(v1parts.length,v2parts.length);var part1,part2;var cmp=0;for(var i=0;i<maxLen&&!cmp;i++){part1=parseInt(v1parts[i],10)||0;part2=parseInt(v2parts[i],10)||0;if(part1<part2){cmp=1}if(part1>part2){cmp=-1}}return eval("0"+comparator+cmp)};SiqContainer.getLogger=function(a){return function(b){if(location.href.indexOf("siqdebug=1")>-1&&typeof console!="undefined"&&console.log){console.log(a+": "+b)}}};SiqContainer.loadJQuery=function(b){siq_log("loadJquery():start");if(SiqContainer.isJQueryValid(window.jQuery)){window.siq_S=window.jQuery;window.siq_ajax=siq_S.ajax;if(typeof b=="function"){b()}}else{var a="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";SiqContainer.MYLAB.script(a).wait(function(){if(SiqContainer.isJQueryValid(window.jQuery)){window.siq_S=window.jQuery.noConflict(true);window.siq_ajax=siq_S.ajax;if(typeof b=="function"){b()}}})}};SiqContainer.ismsie=function(){if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){return true}return false};SiqContainer.msieversion=function(){if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){return RegExp.$1}return false};(function(){siq_contentLoaded(window,function(){var a="siq-container";new SiqContainer(a)})})();